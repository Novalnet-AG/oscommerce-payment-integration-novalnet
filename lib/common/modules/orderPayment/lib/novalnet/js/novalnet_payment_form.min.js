/**
 * This script is used for loading seamless payment form from Novalnet
 *
 * @author     Novalnet
 * @copyright  Copyright (c) Novalnet
 * @license    https://www.novalnet.de/payment-plugins/kostenlos/lizenz
 *
 * Script : novalnet_payment_form.js
 *
 */
document.addEventListener("DOMContentLoaded",(function(){document.querySelector(".payment_class_novalnet_payments label").style.display="none";var e=document.getElementById("nn_line_items").value,t=""!=e?JSON.parse(e):"";const n=new NovalnetPaymentForm,a={iframe:"#novalnet_iframe",initForm:{orderInformation:{lineItems:t},setWalletPending:!0,showButton:!1}};n.initiate(a),n.walletResponse({onProcessCompletion:e=>"SUCCESS"==e.result.status?(document.getElementById("nn_payment_details").value=JSON.stringify(e),document.querySelector("#frmCheckout").submit(),{status:"SUCCESS",statusText:"successful"}):{status:"FAILURE",statusText:"failure"}}),n.selectedPayment((e=>{document.querySelector(".payment_class_novalnet_payments input").checked=!0,checkout.data_changed("payment_changed"),onPaymentChangeBlockHandler(),"GOOGLEPAY"!=e.payment_details.type&&"APPLEPAY"!=e.payment_details.type||(document.querySelector(".btn-2.btn-next").style.display="none")})),document.addEventListener("click",(function(e){"payment"===e.target.name&&e.target.checked&&n.uncheckPayment()})),document.querySelector(".w-checkout-continue-btn button").onclick=function(e){""==document.querySelector("#nn_payment_details").value&&(e.preventDefault(),e.stopImmediatePropagation(),n.getPayment((e=>(document.getElementById("nn_payment_details").value=JSON.stringify(e),document.querySelector("#frmCheckout").submit(),!0))))};try{window.toggleSubFields_novalnet_payments=function(){e=document.getElementById("nn_line_items").value,t=""!=e?JSON.parse(e):"",a.initForm.orderInformation.lineItems=t,document.querySelector(".payment_class_novalnet_payments label").style.display="none",n.initiate(a)},checkout_payment_changed.set("window.toggleSubFields_novalnet_payments")}catch(e){console.log(e)}}));